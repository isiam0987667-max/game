<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Kingdom Simulator</title>
<style>
body{margin:0;font-family:Arial;background:#111;color:#fff}
.top{background:#222;padding:8px;display:flex;flex-wrap:wrap;gap:10px;font-size:13px}
button{padding:8px;margin:5px}
.panel{display:none;padding:10px}
.active{display:block}
.menu{position:fixed;bottom:0;width:100%;background:#222;text-align:center}
.log{font-size:12px;color:#ccc;max-height:150px;overflow:auto}
</style>
</head>

<body>

<div class="top">
ğŸŒ¾ <span id="wheat"></span>
ğŸ– <span id="meat"></span>
ğŸ‘¥ <span id="pop"></span>
âš” <span id="army"></span>
ğŸ’° <span id="gold"></span>
ğŸ– <span id="genCount"></span>
ğŸ“… <span id="month"></span>/<span id="year"></span>
</div>

<div id="map" class="panel active">
<h3>ğŸ—º Kingdoms (1400 AD)</h3>
<ul id="klist"></ul>
</div>

<div id="generals" class="panel">
<h3>ğŸ– Generals</h3>
<button onclick="hireGeneral()">Hire General (100 Gold)</button>
<ul id="glist"></ul>
</div>

<div id="diplo" class="panel">
<h3>ğŸ¤ Diplomacy</h3>
<ul id="dlist"></ul>
</div>

<div id="war" class="panel">
<h3>âš” War Room</h3>
<button onclick="attack()">Attack Selected Enemy</button>
<p id="warTarget"></p>
</div>

<div class="panel" id="turn">
<button onclick="nextTurn()">â¡ NEXT TURN</button>
<div class="log" id="log"></div>
</div>

<div class="menu">
<button onclick="openP('map')">Map</button>
<button onclick="openP('generals')">Generals</button>
<button onclick="openP('diplo')">Diplomacy</button>
<button onclick="openP('war')">War</button>
<button onclick="openP('turn')">Turn</button>
</div>

<script>
let king={
 gold:500,
 wheat:200,
 meat:100,
 population:1200,
 army:400
};

let generals=[];
let selectedEnemy=null;

let month=1,year=1400;

let kingdoms=[
{name:"England",relation:"Enemy",power:400},
{name:"France",relation:"Neutral",power:380},
{name:"Ottoman Empire",relation:"Enemy",power:500},
{name:"Ming China",relation:"Neutral",power:600}
];

function update(){
 wheat.innerText=king.wheat;
 meat.innerText=king.meat;
 pop.innerText=king.population;
 army.innerText=king.army;
 gold.innerText=king.gold;
 genCount.innerText=generals.length;
 monthSpan.innerText=month;
 yearSpan.innerText=year;
}

function openP(id){
 document.querySelectorAll(".panel").forEach(p=>p.classList.remove("active"));
 document.getElementById(id).classList.add("active");
}

function hireGeneral(){
 if(king.gold>=100){
  king.gold-=100;
  generals.push({
   atk:Math.floor(Math.random()*20+10),
   def:Math.floor(Math.random()*20+10)
  });
  logMsg("New general hired.");
 }
 renderGenerals();
 update();
}

function renderGenerals(){
 let ul=document.getElementById("glist");
 ul.innerHTML="";
 generals.forEach((g,i)=>{
  let li=document.createElement("li");
  li.innerText=`General ${i+1} | ATK ${g.atk} DEF ${g.def}`;
  ul.appendChild(li);
 });
}

function renderKingdoms(){
 let ul=document.getElementById("klist");
 ul.innerHTML="";
 kingdoms.forEach((k,i)=>{
  let li=document.createElement("li");
  li.innerText=`${k.name} - ${k.relation}`;
  li.onclick=()=>selectEnemy(i);
  ul.appendChild(li);
 });
}

function selectEnemy(i){
 selectedEnemy=kingdoms[i];
 document.getElementById("warTarget").innerText=
 "Target: "+selectedEnemy.name;
}

function renderDiplo(){
 let ul=document.getElementById("dlist");
 ul.innerHTML="";
 kingdoms.forEach((k,i)=>{
  let li=document.createElement("li");
  li.innerHTML=`${k.name} (${k.relation})
   <button onclick="improve(${i})">Improve</button>
   <button onclick="declareWar(${i})">War</button>`;
  ul.appendChild(li);
 });
}

function improve(i){
 if(king.gold>=50){
  king.gold-=50;
  kingdoms[i].relation="Neutral";
  logMsg("Relation improved with "+kingdoms[i].name);
 }
 renderDiplo();update();
}

function declareWar(i){
 kingdoms[i].relation="Enemy";
 logMsg("War declared on "+kingdoms[i].name);
 renderDiplo();
}

function attack(){
 if(!selectedEnemy || selectedEnemy.relation!="Enemy"){
  logMsg("No enemy selected.");
  return;
 }
 let genPower=generals.reduce((a,g)=>a+g.atk,0);
 let myPower=king.army+genPower;
 let enemyPower=selectedEnemy.power;

 if(myPower>enemyPower){
  king.gold+=100;
  king.army-=50;
  logMsg("Victory! Looted 100 gold.");
 }else{
  king.army-=120;
  logMsg("Defeat! Heavy losses.");
 }
 update();
}

function nextTurn(){
 king.wheat+=30;
 king.meat+=20;
 month++;
 if(month>12){month=1;year++;logMsg("New Year "+year);}
 update();
}

function logMsg(t){
 log.innerHTML="â€¢ "+t+"<br>"+log.innerHTML;
}

const wheat=document.getElementById("wheat");
const meat=document.getElementById("meat");
const pop=document.getElementById("pop");
const army=document.getElementById("army");
const gold=document.getElementById("gold");
const genCount=document.getElementById("genCount");
const monthSpan=document.getElementById("month");
const yearSpan=document.getElementById("year");

renderKingdoms();
renderDiplo();
update();
</script>

</body>
</html>
